<!DOCTYPE html>
<html>

<head>
    <title>Nearby Gyms</title>

    <!-- Stylesheet for the page -->
    <link rel="stylesheet" type="text/css" href="/css/styles.css">

    <!-- Favicon for the page -->
    <link rel="icon" href="/images/favicon.png" type="image/x-icon">

    <!-- JavaScript functions to get user's geolocation and search for nearby gyms -->
    <script>
        //Using https://www.w3schools.com/html/html5_geolocation.asp to help me for this section of code
        // Function to get user's current location
        function getLocation() {
            // Check if Geolocation is supported
            if (navigator.geolocation) {
                // Get user's current position
                navigator.geolocation.getCurrentPosition(showPosition);
            } else { 
                // Geolocation is not supported by this browser
                alert("Geolocation is not supported by this browser.");
            }
        }
    
        // Function to show user's position and redirect to a Google Maps search for nearby gyms
        function showPosition(position) {
            // Create URL for Google Maps search
            let url = `https://www.google.com/maps/search/?api=1&query=Gym&center=${position.coords.latitude},${position.coords.longitude}`;
          
            // Redirect to the URL
            window.location.href = url;
        }
        </script>
</head>

<body>
    <header>
        <!-- Banner for the page -->
        <div class="banner-container">
            <img src="/images/banner.png" alt="Banner">
        </div>
    </header>

    <!-- Navigation menu for the website -->
    <nav>
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/calculator">Calorie Calculator</a></li>
            <li><a href="/tracker">Nutrition Tracker</a></li>
            <li><a href="/gyms">Nearby Gyms</a></li>
            <li><a href="/login">Login</a></li>
            <li><a href="/register">Register</a></li>
            <li><a href="/logout">Logout</a></li>

        </ul>
    </nav>

    <!-- Main content of the page -->
    <div class="container">
        <h1>Nearby Gyms</h1>

        <!-- Instructions for the user -->
        <P>Click the button below to show Gyms that are closest to you!</P>

        <!-- Button to find nearby gyms -->
        <button onclick="getLocation()">Find Nearby Gyms</button>
    </div>

    <!-- Inline JavaScript to display alert messages from URL parameters -->
    <script>
        window.onload = function() {
            // Get the URL parameters
            var params = new URLSearchParams(window.location.search);

            // Check if the 'message' parameter is present
            if(params.has('message')) {
                // Display the message to the user
                alert(params.get('message'));
            }
        };
    </script>

</body>

</html>
